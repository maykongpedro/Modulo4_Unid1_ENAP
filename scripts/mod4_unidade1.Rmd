---
title: "M√≥dulo 4 - Unidade 1 - Aplica√ß√£o da Linguagem R na An√°lise de Dados"
author: "Maykon Gabriel"
date: "05/01/2021"
output: 
    html_document:
        highlight: tango
        theme: paper
        number_sections: no
        toc: yes
        toc_float:
          collapsed: yes
          smooth_scroll: no
---
# Unidade 4
üéØ Objetivo de aprendizagem

A proposta deste t√≥pico √© colocar em pr√°tica algumas das fun√ß√µes do R trabalhando com a an√°lise de dados abertos de viagens a servi√ßo, com o intuito de subsidiar a tomada de medidas mais eficientes na redu√ß√£o dos gastos com os custos dessas viagens no setor p√∫blico.

# 1. Defini√ß√£o do problema

Para resolver um problema, primeiramente temos que entend√™-lo. Assim, precisamos entender os gastos com viagens a servi√ßo para tomar medidas mais eficientes e, com isso, reduzir os custos dessas viagens.

Vamos levantar algumas quest√µes relevantes acerca dessa problem√°tica:

- **Qual √© o valor gasto por √≥rg√£o?**
- **Qual √© o valor gasto por cidade?**
- **Qual √© a quantidade de viagens por m√™s?**

# 1.1 Carregando pacotes
```{r,warning=FALSE, message=FALSE}
library(tidyverse)
library(knitr)
library(kableExtra)
```



# 2. Obten√ß√£o dos dados
Para obter os dados, basta abrir o [Portal da Transpar√™ncia](http://www.portaltransparencia.gov.br/download-de-dados), ir em __Viagens a servi√ßo__, clicar no link do arquivo e selecionar o ano da consulta. Ap√≥s isso √© s√≥ baixar e abrir no R.
```{r}
# Carregando os dados
viagens <- read.csv2(
  file = "../dados/2019_Viagem.csv",
  sep = ";",
  dec = ","
)

# N√£o est√° dando boa pq a tabela √© muito grande
# kable(head(viagens)) %>% 
#   kable_styling(full_width = FALSE, bootstrap_options = c("striped"))

View(viagens)

# Resumo da coluna de valor das passagens
summary(viagens$Valor.passagens)
```

```{r}
# Descobrindo o tipo de dado de cada coluna
dplyr::glimpse(viagens)
```

## 2.1 Dicion√°rio de dados
O Dicion√°rio encotra-se no seguinte link: [Dicion√°rio de Dados - Viagens a servi√ßo - Pagamentos](http://www.portaltransparencia.gov.br/pagina-interna/603364-dicion√°rio-de-dados-viagens-a-Servi√ßo-Pagamentos)

# 3. Transforma√ß√£o dos dados
√â importante ter em mente que, na linguagem R, diversas transforma√ß√µes nos dados coletados podem ser realizadas, a depender do tipo de dado e do objetivo da an√°lise.

As colunas de `Per√≠odo...Data.de.in√≠cio` e `Per√≠odo...Data.de.fim` est√£o como `chr`, por√©m devem ser convertidas para data. No seguinte link tem algumas informa√ß√µes sobre formata√ß√£o de datas dentro do R: [Data Values](https://www.statmethods.net/input/dates.html)

```{r}
# ? as.Date

viagens$data.in√≠cio <- as.Date(viagens$Per√≠odo...Data.de.in√≠cio, "%d/%m/%Y")

dplyr::glimpse(viagens)

```
```{r}
viagens$data.in√≠cio.formatada <- format(viagens$data.in√≠cio, "%Y-%m")
head(viagens$data.in√≠cio.formatada)

```

